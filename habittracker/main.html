<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit, Goal, and Achievement Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .section {
            margin-bottom: 40px;
        }
        .section h2 {
            color: #555;
            border-bottom: 2px solid #ddd;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .card {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .card h3 {
            margin: 0 0 10px 0;
        }
        .card p {
            margin: 5px 0;
            color: #666;
        }
        .card-actions {
            margin-top: 10px;
        }
        .card-actions button {
            padding: 8px 12px;
            margin-right: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #007BFF;
            color: white;
        }
        .card-actions button.edit {
            background-color: #ffc107;
        }
        .card-actions button.delete {
            background-color: #dc3545;
        }
        button.add-button {
            background-color: #007BFF;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 0 auto 20px;
        }
        .controls {
            margin-bottom: 20px;
            text-align: center;
        }
        .controls input, .controls select {
            padding: 8px;
            margin: 0 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .pagination {
            text-align: center;
            margin-top: 20px;
        }
        .pagination button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #007BFF;
            color: white;
            margin: 0 5px;
        }
        .success-icon {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        .success-icon img {
            max-width: 100%;
            max-height: 100%;
        }

    </style>
</head>
<body>
<div class="container">
    <h1>Habit, Goal, and Achievement Tracker</h1>

    <!-- Email Sending Section -->
    <div class="section" id="email-section">
        <h2>Send Email</h2>
        <div class="controls">
            <input type="text" id="email-recipients" placeholder="Recipients (comma-separated)">
            <input type="text" id="email-subject" placeholder="Subject">
            <input type="file" id="email-attachment" name="attachment">
            <textarea id="email-body" placeholder="Email body" rows="5"></textarea>

        </div>
        <button class="add-button" onclick="sendEmail()">Send Email</button>
        <div class="success-icon" id="success-icon">
            <img src="message-sending.png"></img>


            <p>Email sent successfully!</p>
        </div>

    </div>

    <!-- Notifications Section -->
    <div class="section" id="notifications-section">
        <h2>Notifications</h2>
        <div class="controls">
            <input type="text" id="notification-filter" placeholder="Filter notifications">
            <select id="notification-sort">
                <option value="">Sort By</option>
                <option value="message">Message</option>
                <option value="scheduled_at">Scheduled Date</option>
            </select>
            <button onclick="applyNotificationFilterSort()">Apply</button>
        </div>
        <button class="add-button" onclick="addNotification()">Add Notification</button>
        <div id="notifications-container"></div>
        <div class="pagination" id="notifications-pagination">
            <button onclick="prevNotificationPage()">Previous</button>
            <button onclick="nextNotificationPage()">Next</button>
        </div>
    </div>

    <!-- Habits Section -->
    <div class="section" id="habits-section">
        <h2>Habits</h2>
        <div class="controls">
            <input type="text" id="habit-filter" placeholder="Filter habits">
            <select id="habit-sort">
                <option value="">Sort By</option>
                <option value="name">Name</option>
            </select>
            <button onclick="applyHabitFilterSort()">Apply</button>
        </div>
        <button class="add-button" onclick="addHabit()">Add Habit</button>
        <div id="habits-container"></div>
        <div class="pagination" id="habits-pagination">
            <button onclick="prevHabitPage()">Previous</button>
            <button onclick="nextHabitPage()">Next</button>
        </div>
    </div>

    <!-- Goals Section -->
    <div class="section" id="goals-section">
        <h2>Goals</h2>
        <div class="controls">
            <input type="text" id="goal-filter" placeholder="Filter goals">
            <select id="goal-sort">
                <option value="">Sort By</option>
                <option value="name">Name</option>
                <option value="deadline">Deadline</option>
            </select>
            <button onclick="applyGoalFilterSort()">Apply</button>
        </div>
        <button class="add-button" onclick="addGoal()">Add Goal</button>
        <div id="goals-container"></div>
        <div class="pagination" id="goals-pagination">
            <button onclick="prevGoalPage()">Previous</button>
            <button onclick="nextGoalPage()">Next</button>
        </div>
    </div>

    <!-- Achievements Section -->
    <div class="section" id="achievements-section">
        <h2>Achievements</h2>
        <div class="controls">
            <input type="text" id="achievement-filter" placeholder="Filter achievements">
            <select id="achievement-sort">
                <option value="">Sort By</option>
                <option value="title">Title</option>
                <option value="date">Date</option>
            </select>
            <button onclick="applyAchievementFilterSort()">Apply</button>
        </div>
        <button class="add-button" onclick="addAchievement()">Add Achievement</button>
        <div id="achievements-container"></div>
        <div class="pagination" id="achievements-pagination">
            <button onclick="prevAchievementPage()">Previous</button>
            <button onclick="nextAchievementPage()">Next</button>
        </div>
    </div>
</div>
<script src="notifications.js"></script>
<script src="habits.js"></script>
<script src="goals.js"></script>
<script src="achievements.js"></script>
<script src="script.js"></script>
<script>
    async function sendEmail() {
        const recipients = document.getElementById('email-recipients').value;
        const subject = document.getElementById('email-subject').value;
        const body = document.getElementById('email-body').value;

        if (!recipients || !subject || !body) {
            alert('All fields are required!');
            return;
        }

        try {
            const response = await fetch('http://localhost:8080/api/admin/send-mass-email', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    emails: recipients.split(','),
                    subject: subject,
                    body: body
                }),
            });

            if (response.ok) {
                alert('Email sent successfully!');
                document.getElementById('email-recipients').value = '';
                document.getElementById('email-subject').value = '';
                document.getElementById('email-body').value = '';
                document.getElementById('success-icon').style.display = 'block';
            } else {
                const errorText = await response.text();
                console.error('Error sending email:', errorText);
                alert('Failed to send email.');
            }
        } catch (error) {
            console.error('Unexpected error:', error);
            alert('Unexpected error occurred.');
        }
    }
</script>
</body>
</html>
